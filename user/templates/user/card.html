{% extends "user/index.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block start %}

<main class="card-wrapper">
   <header>
      <h4>Olá, {{ user.last_name }}!</h4>
      <a href="{% url 'index' %}">
         <img src="{% static 'images/shopkeeper/icons/arrow-left.svg' %}" alt="Voltar">
         Retornar
      </a>
   </header>
   
   <div class="input-group">   
      <h4>Informe a porcentagem de desconto em cada compra, se não quiser aplicar desconto informe 0 %.</h4>
   
      <script>
   
         function toggleInputCells(button) {
         var cells = document.getElementsByClassName('input');
   
         for (var i = 0; i < cells.length; i++) {
            var cell = cells[i];
            var input = cell.getElementsByTagName('input')[0];
   
            if (input != null) {
               var text = input.value;
               cell.innerHTML = text;
            } else {
               var text = cell.innerHTML;
               cell.innerHTML = '';
               var input = document.createElement('input');
               input.type = "text";
               input.value = text;
               cell.appendChild(input);
            }
         }
      }
   
      var rows = 5;
      var cols = 2;
   
      var inputGroup = document.querySelector('.input-group')
      var table = document.createElement('table');
      table.classList.add('table');
   
      var thead = document.createElement('thead');
      var headRow = document.createElement('tr');
      var columnNames = ["", "", "", "", ""];
   
      for (var i = 0; i < cols; i++) {
         var th = document.createElement('th');
         th.appendChild(document.createTextNode(columnNames[i]));
         headRow.appendChild(th);
      }
   
      thead.appendChild(headRow);
   
      var tbody = document.createElement('tbody');
   
      for (var i = 0; i < rows; i++) {
         var tr = document.createElement('tr');
   
         for (var j = 0; j < cols; j++) {
            var td = document.createElement('td');
   
            if (j >= 0) {
               td.classList.add("input");
               var input = document.createElement('input');
               input.type = "text";
               input.value = (1+j+i*2)+'ª compra %'; // Add a value?
               td.appendChild(input);
               tr.appendChild(td);
               continue;
            }
            //td.appendChild(document.createTextNode("x"));
            //tr.appendChild(td);
         }
   
         tbody.appendChild(tr);
      }
   
      table.appendChild(thead);
      table.appendChild(tbody);
      inputGroup.appendChild(table);
   
   
      </script>
    
   </div>
        
   <button onClick="toggleInputCells(this)">Cadastrar cartão</button>
</main>
{% endblock start %}